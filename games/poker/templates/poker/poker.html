{% extends 'menus/base.html' %}
{% load static %}
{% block title %}Poker{% endblock %}
{% block head %}
    <style>
        .content {
            width: 100%;
            max-width: none;
            padding: 15px;
            margin: auto;
        }

        .form-input {
            width: 100%;
            max-width: 500px;
            padding: 15px;
            margin: auto;
        }

        .form-input .form-floating:focus-within {
            z-index: 2;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
          integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
{% endblock %}
{% block bodyclass %}class="text-center bg-light"{% endblock %}
{% block content %}
    <div class="content">
        <div class="row">
                <div class="col">
                    <div id="readyBoard">
                        Board:
                    </div>
                </div>
                <div class="col dealer-hide" hidden>
                    <div class="row" id="dealer-hand">
                        <div class="col">
                            <img src="/static/img/cards/2C.svg" height="100" alt="2C">
                            <img src="/static/img/cards/2S.svg" height="100" alt="2S"></div>
                        <div class="col-sm-1">23</div>
                    </div>
                </div>
        </div.
        <div class="col">
            <button class="w-20 btn btn-lg btn-secondary mt-2" type="button" id="deal-btn" value="0" width = "20px">
                Deal Cards
            </button>
       </div>
        <div id = "current_turn">

        </div>
        <div id = "last_raiser">

        </div>
        <div id = "winner">

        </div>
            <div id = "pot">

        </div>
        <div id = "price_to_call">
            current turn
        </div>
        <div class="row">
            <div class="col">
                <div id="player_hands">
                    Hands:
                </div>
            </div>
        </div>
        <div class="col">
            <button class="w-20 btn btn-lg btn-secondary mt-2" type="button" id="check-btn" value="0" width = "100px">
                Check / Call
            </button>
            <button class="w-20 btn btn-lg btn-secondary mt-2" type="button" id="fold-btn" value="0" width = "100px">
                Fold
            </button>
        </div>

            <!-- Betting page -->
        <div id="betting" class="form-input">
            <form method="post" id="bet-form">
                {% csrf_token %}
                <div class="mb-4" style="height: 57px;"></div>
                <h1 class="h3 mb-3 fw-normal">Bet</h1>
                {% if form.errors %}
                    <div class="alert alert-danger" role="alert">
                        Insufficient funds
                    </div>
                {% endif %}
                <div class="row">
                    <div class="col">
                        <div class="form-floating" style="padding: 2px;">
                            <input type="text" class="form-control" value="{{ user.current_balance }}"
                                   id="current-balance" disabled>
                            <label>Current balance</label>
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-floating" style="padding: 2px;">
                            <input type="text" class="form-control" id="bet" pattern="[0-9]*?.[0-9]{0,2}"
                                   title="Enter a valid dollar amount" value="0">
                            <label>Bet</label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <button class="w-100 btn btn-lg btn-primary mt-2" type="submit">Place bet</button>
                    </div>
                </div>

            </form>
        </div>

    </div>



{% endblock %}
{% block scripts %}
    {{ session|json_script:"session" }}
    {{ user.username|json_script:"username" }}
    <script>staticPath = "{% static '' %}"</script>
    <script src="{% static 'poker/poker.js' %}" type="text/javascript"></script>
    <script src="{% static 'poker/listeners.js' %}" type="text/javascript"></script>
{% endblock %}
